# Tushareå¯¹æ¥OpenBBåˆ†æAè‚¡ä¸æ¸¯è‚¡å¸‚åœº

**OpenBB** ä½œä¸º**å¼€æºé‡‘èæ•°æ®å¹³å°**ï¼Œè‡´åŠ›äºä¸ºæŠ•èµ„è€…ã€åˆ†æå¸ˆä¸å¼€å‘è€…æä¾›å…è´¹é€æ˜çš„é‡‘èæ•°æ®æ¥å£ã€‚å…³äºOpenBBçš„ä»‹ç»ä»¥åŠå¦‚ä½•ä½¿ç”¨ï¼Œè¯·å‚é˜…[OpenBBçš„ä»‹ç»ä»¥åŠå¦‚ä½•ä½¿ç”¨OpenBBåŠ©åŠ›Aè‚¡æ¸¯è‚¡çš„é‡‘èæ•°æ®åˆ†æ](https://blog.csdn.net/qq_29953771/article/details/148971007?fromshare=blogdetail&sharetype=blogdetail&sharerId=148971007&sharerefer=PC&sharesource=qq_29953771&sharefrom=from_link)ã€‚

OpenBBè™½æ”¯æŒå¤šä¸ªæ•°æ®æºï¼Œä½†ä¸­å›½åŒºï¼ˆå«é¦™æ¸¯ï¼‰é‡‘èæ•°æ®è·å–ä¸»è¦ä¾èµ–Yahoo Financeã€‚è¯¥å¹³å°ä½œä¸ºå…è´¹åŸºç¡€æ•°æ®æºè™½èƒ½æ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†å¯¹ä¸­æ¸¯å¸‚åœºçš„è¦†ç›–æ·±åº¦ä»æ˜¾ä¸è¶³ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œä¸­å›½å†…åœ°ç”¨æˆ·éœ€å€ŸåŠ©VPNæ–¹å¯è®¿é—®æ­¤æœåŠ¡ï¼Œå½¢æˆæ˜¾è‘—ä½¿ç”¨é—¨æ§›ã€‚

è¦æŸ¥è¯¢Aè‚¡å’Œæ¸¯è‚¡æ•°æ®ï¼ŒOpenBBäºŸå¾…å®Œå–„æœ¬åœ°åŒ–é‡‘èæ•°æ®æºçš„æ¥å…¥ã€‚Aè‚¡å’Œæ¸¯è‚¡æ•°æ®ï¼Œä»˜è´¹çš„ä¸»æµæ–¹æ¡ˆåŒ…æ‹¬Windã€ä¸œæ–¹è´¢å¯ŒChoiceå’ŒåŒèŠ±é¡ºiFindï¼ˆä¸»è¦é¢å‘æœºæ„å®¢æˆ·ï¼‰ï¼›å¼€æºæ•°æ®æºåˆ™ä»¥Tushareæˆ–AKShareä¸ºä¸»è¦æ›¿ä»£æ–¹æ¡ˆã€‚

Tushare ä¸ AKShare ä½œä¸ºä¸¤æ¬¾é‡è¦çš„é‡‘èæ•°æ®å·¥å…·ï¼Œå…·å¤‡å„è‡ªé²œæ˜çš„ç‰¹ç‚¹ã€‚ä¸ºæ¸…æ™°å±•ç¤ºå…¶å·®å¼‚ï¼Œä¸‹è¡¨å¯¹äºŒè€…è¿›è¡Œäº†ç³»ç»Ÿæ€§çš„æ¯”è¾ƒå’Œæ€»ç»“ã€‚

| ç‰¹æ€§     | Tushare         | AKShare       |
| ------ | --------------- | ------------- |
| æ˜¯å¦å…è´¹   | å…è´¹ç‰ˆåŠŸèƒ½å—é™ï¼Œé«˜çº§åŠŸèƒ½éœ€ç§¯åˆ† | å®Œå…¨å…è´¹          |
| æ•°æ®è´¨é‡   | é«˜ï¼Œæ ‡å‡†åŒ–           | ä¸­ç­‰ï¼Œä¾èµ–æºç«™ï¼Œéœ€æ¸…æ´—   |
| æ•°æ®è¦†ç›–èŒƒå›´ | å¹¿ï¼Œåé‡Aè‚¡å’Œå®è§‚       | éå¸¸å¹¿ï¼Œå«åŠ å¯†è´§å¸ã€å¤–ç›˜ç­‰ |
| æ¥å£ç¨³å®šæ€§  | é«˜ï¼ˆPro APIï¼‰      | ä¸­ç­‰ï¼ˆå—æºç«™å½±å“ï¼‰     |
| æ–‡æ¡£å®Œæ•´æ€§  | é«˜ï¼Œè¯¦ç»†            | ä¸­ç­‰ï¼Œéƒ¨åˆ†éœ€çœ‹æºç      |
| ç¤¾åŒºæ´»è·ƒåº¦  | é«˜ï¼Œæˆç†Ÿ            | é«˜ï¼Œæ›´æ–°å¿«         |
| å­¦ä¹ æˆæœ¬   | ä½               | ä½åˆ°ä¸­           |
| é€‚åˆç”¨æˆ·   | ä¼ä¸šã€ä¸“ä¸šç ”ç©¶è€…        | å­¦ç”Ÿã€ä¸ªäººå¼€å‘è€…ã€åˆå­¦è€…  |
| å®æ—¶æ•°æ®æ”¯æŒ | æ”¯æŒï¼ˆéœ€é«˜çº§æƒé™ï¼‰       | éƒ¨åˆ†æ”¯æŒï¼Œä¾èµ–æºç«™     |
| ç»´æŠ¤æ¨¡å¼   | ä¸ªäººä¸»å¯¼            | ç¤¾åŒºé©±åŠ¨          |

å½“å‰å·²æœ‰ä¸¤ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œåˆ†åˆ«å¼€å‘äº†é’ˆå¯¹ Tushare å’Œ AKShare çš„ OpenBB æ•°æ®æºæ‰©å±•ã€‚

- Tushare:Â https://github.com/finanalyzer/openbb_tushare

- AKShare:Â https://github.com/finanalyzer/openbb_akshare

æœ¬æ–‡ä¸»è¦è®²è¿°å¦‚ä½•ä½¿ç”¨Tushareä½œä¸ºOpennBBæ•°æ®æºã€‚å¦‚æœè¦äº†è§£å¦‚ä½•ä½¿ç”¨AKShareä½œä¸ºOpenBBæ•°æ®æºï¼Œè¯·å‚é˜…æ–‡ç« [å¦‚ä½•ä½¿ç”¨AKShareä½œä¸ºOpenBBçš„æ•°æ®æº](https://blog.csdn.net/qq_29953771/article/details/149118462)ã€‚`openbb_tushare`é¡¹ç›®ä½œä¸º OpenBB çš„æ•°æ®æºæ‰©å±•ï¼Œå¯å®ç° Tushare æ•°æ®åœ¨ OpenBB å¹³å°çš„æ— ç¼æ¥å…¥ã€‚

## ğŸ’» ç¯å¢ƒæ­å»ºä¸å®‰è£…æµç¨‹

ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡Python APIæ¥å£å’ŒOpenBB Platform CLIä¸å¹³å°äº¤äº’ã€‚è¦é›†æˆTushareæ•°æ®æºï¼Œéœ€æŒ‰ä»¥ä¸‹æ­¥éª¤é…ç½®å¼€å‘ç¯å¢ƒï¼š

1. åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ

   å¯ä»¥ä½¿ç”¨uvæˆ–è€…poetryæ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨Pythonè‡ªå¸¦çš„ç»„ä»¶venvæ¥æ­å»ºè™šæ‹Ÿç¯å¢ƒã€‚

   ```bash
   python3 -m venv .venv
   ```

   åˆ›å»ºäº†è™šæ‹Ÿç¯å¢ƒåï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚

   ```bash
   source .venv/bin/activate
   ```

   æ³¨ï¼šWindowsç³»ç»Ÿæ‰§è¡Œ`.venv\Scripts\activate`

2. å®‰è£…OpenBB Platform CLI

   åœ¨ä¸Šé¢çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…`openbb-cli`æ¥ä½¿ç”¨OpenBB Platform CLIã€‚

   ```bash
   pip install openbb-cli
   ```

   å¦‚æœä½ åœ¨ä¸­å›½å¤§é™†ï¼Œå¯ä»¥å…ˆè®¾ç½®ä¸‹é¢çš„ç¯å¢ƒå˜é‡ã€‚è¿™æ ·å¯ä»¥ä½¿ç”¨é˜¿é‡Œçš„é•œåƒæ¥åŠ é€Ÿå®‰è£…è¿‡ç¨‹ã€‚

   ```powershell
   set PIP_INDEX_URL=https://mirrors.aliyun.com/pypi/simple
   ```

3. å®‰è£…openbb_tushare

   æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…`openbb_tushare`æ¥ä½¿ç”¨Tushareæ•°æ®æºã€‚

   ```bash
   pip install openbb_tushare
   ```

   å®‰è£…`openbb_tushare`åï¼Œéœ€è¦é‡æ–°æ„å»ºèµ„æºè®©å®‰è£…ç”Ÿæ•ˆã€‚

   ```bash
   python -c "import openbb; openbb.build()"
   ```

## Tushare ä»¤ç‰Œ(token)çš„é…ç½®

ç”±äº Tushare è¦æ±‚ä½¿ç”¨ token è®¿é—®æ•°æ®æºï¼Œä½¿ç”¨å‰éœ€å®Œæˆ token é…ç½®ã€‚æ•°æ®æºçš„ token æ”¯æŒä»¥ä¸‹ä¸¤ç§é…ç½®æ–¹å¼ï¼š

1. é€šè¿‡OpenBB Hubé…ç½®

2. æœ¬åœ°ç¯å¢ƒé…ç½®

å…·ä½“æ“ä½œæµç¨‹è¯·å‚é˜…å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.openbb.co/platform/settings/user_settings/api_keys

æœ¬æ–‡ç®€è¦è¯´æ˜åœ¨æœ¬åœ°ç¯å¢ƒé…ç½® Tushare token çš„æ–¹æ³•ï¼šOpenBB çš„ç”¨æˆ·åå¥½è®¾ç½®åŠ token å‡å­˜å‚¨äºæœ¬åœ°è·¯å¾„ ~/.openbb_platform/ï¼Œå¹¶ä»¥ JSON æ ¼å¼ä¿å­˜äº user_settings.json æ–‡ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```JSON
{
  "credentials": {
    "fmp_api_key": "REPLACE",
    "tushare_api_key": "REPLACE"
  }
}
```

åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œæ·»åŠ è‡ªå·±çš„Tushare tokenæ¥è®¿é—®Tushareçš„æ•°æ®æ¥å£ã€‚

## ğŸš€ ä½¿ç”¨ Tushare æ•°æ®æº

æ¥ä¸‹æ¥å°†é€šè¿‡è·å–è‚¡ç¥¨å†å²æ•°æ®ä¸è´¢åŠ¡æ•°æ®ä¸ºä¾‹ï¼Œæ¥è®²è¿°ä½¿ç”¨ Tushare æ•°æ®æºçš„å®é™…åº”ç”¨æµç¨‹ã€‚åŒæ ·çš„åŠŸèƒ½å°†åˆ†åˆ«ç”¨Jupyter Notebookå’ŒOpenBB CLIæ¥æ¼”ç¤ºã€‚

### æ£€æŸ¥Tushareæ‰©å±•çš„å®‰è£…å’Œç‰ˆæœ¬

åœ¨å®é™…ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç¡®è®¤ä¸€ä¸‹ç¯å¢ƒçš„å®‰è£…å’Œé…ç½®æƒ…å†µã€‚

```Python
from openbb import obb

obj = obb.reference["info"]["extensions"]["openbb_provider_extension"]
modules = [item for item in obj if "tushare" in item]
modules.append([item for item in obj if "akshare" in item][0])
print(modules)
```

è¾“å‡º:

```
['openbb_tushare@0.2.4', 'openbb_akshare@0.4.46']
```

å¦‚ä¸Šæ‰€è¿°ï¼Œä»£ç å·²æˆåŠŸéªŒè¯ openbb_tushare å’Œ openbb_akshare æ‰©å±•çš„ç‰ˆæœ¬é…ç½®ã€‚ç¯å¢ƒæ£€æŸ¥æ— è¯¯åï¼Œå³å¯å¯ç”¨ OpenBB å¹³å°å’Œ Tushare æ•°æ®æºã€‚

### è·å–è‚¡ç¥¨å†å²æ•°æ®ï¼ˆä»¥ä¸­å›½é“¶è¡Œä¸ºä¾‹ï¼‰

å¦‚å‰æ‰€è¿°ï¼Œé€šè¿‡ Python è„šæœ¬å’ŒOpenBB CLIå‡å¯é€šè¿‡ OpenBB å¯¹ Tushare æ•°æ®æºçš„è®¿é—®ã€‚Python ä»£ç ç¤ºä¾‹å°†åœ¨ Jupyter Notebook ç¯å¢ƒä¸­è¿è¡Œï¼Œå‘½ä»¤è¡Œæ“ä½œåˆ™é‡‡ç”¨ Windows ç³»ç»Ÿæ‰§è¡Œã€‚

#### Jupyter Notebook è·å–è‚¡ç¥¨å†å²æ•°æ®

```Python
import pandas as pd

symbol = "601988.SH"
tickers = {"601988.SH": "Bank of China", "601006.SH": "Daqin Railway Co., Ltd."}
start = "2025-06-01"
end = "2025-07-31"
data = obb.equity.price.historical(symbol=symbol, start_date=start, end_date=end, 
                                   provider="tushare")
daily = data.to_dataframe()
daily.index = pd.to_datetime(daily.index)  # Convert index to datetime
daily.head()
```

æ‰§è¡Œç»“æœï¼š

```plaintext
	open	high	low	close	volume	amount	change	change_percent	pre_close
date									
2025-06-03	5.49	5.54	5.45	5.52	3290209.80	1807538.711	0.00	0.0000	5.52
2025-06-04	5.51	5.52	5.49	5.50	1653467.01	909604.517	-0.02	-0.3623	5.52
2025-06-05	5.50	5.51	5.46	5.47	2606604.23	1426854.477	-0.03	-0.5455	5.50
2025-06-06	5.47	5.49	5.43	5.45	2649578.38	1443638.857	-0.02	-0.3656	5.47
2025-06-09	5.44	5.46	5.41	5.43	2512503.43	1361861.754	-0.02	-0.3670	5.45
```

æ‰§è¡Œå‰è¿°ä»£ç åï¼Œå·²æˆåŠŸè·å– 2025 å¹´ 6 æœˆ 1 æ—¥è‡³ 2025 å¹´ 7 æœˆ 31 æ—¥æœŸé—´çš„å†å²è‚¡ä»·æ•°æ®ã€‚è¯¥æ•°æ®é›†å¯è¿›ä¸€æ­¥å¯è§†åŒ–ç”Ÿæˆ K çº¿å›¾ï¼Œå±•ç¤ºå¦‚ä¸‹ï¼š

```Python
from openbb_demo import plot_candle
plot_candle(daily, title=tickers[symbol])
```

![sh601988](docs/images/sh601988chart.png)

#### ä½¿ç”¨OpenBB CLIæŸ¥è¯¢å†å²è‚¡ä»·

è‹¥éœ€åœ¨ OpenBB ç»ˆç«¯é‡å¤å‰è¿°æ“ä½œæµç¨‹ï¼Œå¯é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ OpenBB å‘½ä»¤è¡Œç¯å¢ƒï¼š

```PowerShell
C:\> openbb
```

å¯åŠ¨OpenBBå‘½ä»¤è¡Œç¯å¢ƒåï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ã€‚

```bash
2025 Aug 01, 03:48 (ğŸ¦‹) /equity/price/ $ historical --symbol 601988.SH --start_date 2025-06-01 --end_date 2025-07-31 --
provider tushare
```

æ‰§è¡Œè¯¥å‘½ä»¤åï¼ŒOpenBB ç»ˆç«¯å°†è‡ªåŠ¨åœ¨ WebView è§†å›¾ä¸­æ¸²æŸ“è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![sh601988](docs/images/sh601988.png)

### è·å–è‚¡ç¥¨è´¢åŠ¡æ•°æ®ï¼ˆä»¥ä¸­å›½é“¶è¡Œä¸ºä¾‹ï¼‰

#### ä½¿ç”¨Jupyter Notebook è·å–ä¸­å›½é“¶è¡Œè´¢åŠ¡æ•°æ®

è‚¡ç¥¨åŸºæœ¬é¢åˆ†æé€šå¸¸æ¶µç›–ä¸‰å¤§æ ¸å¿ƒè´¢åŠ¡æŠ¥è¡¨ï¼šåˆ©æ¶¦è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨åŠç°é‡‘æµé‡è¡¨ã€‚

è·å–ä¸­å›½é“¶è¡Œï¼ˆBank of Chinaï¼‰åˆ©æ¶¦è¡¨æ•°æ®å¯æ‰§è¡Œä¸‹è¿°ä»£ç ï¼š

```Python
income_obj = obb.equity.fundamental.income(symbol=symbol, provider="tushare")
income_df = income_obj.to_dataframe()
income_df.head()
```

è¾“å‡ºï¼š

```
	period_ending	fiscal_period	fiscal_year	total_revenue	net_income
0	2024-12-31	FY	2024	6.300900e+11	2.527190e+11
1	2023-12-31	FY	2023	6.228890e+11	2.463710e+11
2	2022-12-31	FY	2022	6.180090e+11	2.375040e+11
3	2021-12-31	FY	2021	6.055590e+11	2.273390e+11
4	2020-12-31	FY	2020	5.655310e+11	2.050960e+11
```

è¯¥è´¢åŠ¡æ•°æ®å¯è¿›ä¸€æ­¥è½¬åŒ–ä¸ºæŸ±çŠ¶å›¾è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```Python
income_df.plot(x='fiscal_year', y=['total_revenue', 'net_income'],
    kind='bar',
    figsize=(10, 5),
    title=tickers[symbol])
```

![sh601988bar](docs/images/sh601988bar.png)

#### ä½¿ç”¨OpenBB CLIè·å–ä¸­å›½é“¶è¡Œè´¢åŠ¡æ•°æ®:

ç»§ç»­é€šè¿‡ OpenBB ç»ˆç«¯è·å–ä¸­å›½é“¶è¡Œè´¢åŠ¡æ•°æ®ã€‚

```
2025 Aug 01, 04:47 (ğŸ¦‹) /equity/fundamental/ $ income --symbol 601988.SH --provider tushare
```

å…¶è¾“å‡ºç»“æœå°†å®æ—¶æ¸²æŸ“äº WebView äº¤äº’ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![sh601988](docs/images/sh601988income.png)

## ğŸŒŸ openbb_tushare é¡¹ç›®ç”Ÿæ€

ç›®å‰`openbb_tushare`é¡¹ç›®æ­£å¤„äºæ´»è·ƒå¼€å‘é˜¶æ®µï¼Œæ¬¢è¿å¼€æºç¤¾åŒºè´¡çŒ®åŠ›é‡ï¼š

**ä»£ç ä»“åº“**ï¼š

- GitHubï¼šhttps://github.com/finanalyzer/openbb_tushare

- GitCodeï¼šhttps://gitcode.com/finanalyzer/openbb_tushare

**å‚ä¸æ–¹å¼**ï¼š

1. æäº¤ Issue åé¦ˆæ•°æ®éœ€æ±‚æˆ– Bug

2. è´¡çŒ® PR ä¼˜åŒ–æ•°æ®æºæ¥å£

3. å®Œå–„æ–‡æ¡£å¸®åŠ©æ›´å¤šç”¨æˆ·

é€šè¿‡ Tushare ä¸ OpenBB çš„é›†æˆï¼Œä¸­å›½åŒºç”¨æˆ·å¯æ›´ä¾¿æ·åœ°è·å– A è‚¡ã€æ¸¯è‚¡ç­‰å¸‚åœºçš„å®æ—¶ä¸å†å²æ•°æ®ï¼Œä¸ºé‡åŒ–åˆ†æã€æŠ•èµ„ç ”ç©¶æä¾›å¼ºæœ‰åŠ›çš„æ•°æ®æ”¯æ’‘ã€‚